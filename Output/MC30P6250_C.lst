gplink-2.2.37 (Jan 22 2024)
Listing File Generated: 2025-7-3  10:27:35
 
 
Address  Value    Disassembly              Source
-------  -----    -----------              ------
                                           ;--------------------------------------------------------
                                           ; external declarations
                                           ;--------------------------------------------------------
                                           	extern	_CLR_RAM
                                           	extern	_TIMER1_PWM_Init
                                           	extern	_INDFbits
                                           	extern	_T0CNTbits
                                           	extern	_PCLbits
                                           	extern	_STATUSbits
                                           	extern	_FSRbits
                                           	extern	_P1bits
                                           	extern	_MCRbits
                                           	extern	_P1KBCRbits
                                           	extern	_PCLATHbits
                                           	extern	_PDCONbits
                                           	extern	_ODCONbits
                                           	extern	_PUCONbits
                                           	extern	_INTEbits
                                           	extern	_INTFbits
                                           	extern	_T0CRbits
                                           	extern	_T1DATDbits
                                           	extern	_DDR1bits
                                           	extern	_PWM1CR1bits
                                           	extern	_PWM1CR0bits
                                           	extern	_T1DATBbits
                                           	extern	_T1DATCbits
                                           	extern	_TM0CRbits
                                           	extern	_T1CRbits
                                           	extern	_T1CNTbits
                                           	extern	_T1LOADbits
                                           	extern	_T1DATAbits
                                           	extern	_CMPCR0bits
                                           	extern	_CMPCR1bits
                                           	extern	_CMPCR2bits
                                           	extern	_INDF
                                           	extern	_T0CNT
                                           	extern	_PCL
                                           	extern	_STATUS
                                           	extern	_FSR
                                           	extern	_GPR1
                                           	extern	_P1
                                           	extern	_GPR0
                                           	extern	_MCR
                                           	extern	_P1KBCR
                                           	extern	_PCLATH
                                           	extern	_PDCON
                                           	extern	_ODCON
                                           	extern	_PUCON
                                           	extern	_INTE
                                           	extern	_INTF
                                           	extern	_T0CR
                                           	extern	_T1DATD
                                           	extern	_DDR1
                                           	extern	_PWM1CR1
                                           	extern	_PWM1CR0
                                           	extern	_T1DATB
                                           	extern	_T1DATC
                                           	extern	_TM0CR
                                           	extern	_T1CR
                                           	extern	_T1CNT
                                           	extern	_T1LOAD
                                           	extern	_T1DATA
                                           	extern	_CMPCR0
                                           	extern	_CMPCR1
                                           	extern	_CMPCR2
                                           ;--------------------------------------------------------
                                           ; global declarations
                                           ;--------------------------------------------------------
                                           	global	_params_init
                                           	global	_Sys_Init
                                           	global	_TIMER0_INT_Init
                                           	global	_IO_Init
                                           	global	_delay_ms
                                           	global	_C_RAM
                                           	global	_key_scan
                                           	global	_light_mode_handle
                                           	global	_rt_detect_event
                                           	global	_main
                                           	global	_int_isr
                                           	global	_abuf
                                           	global	_statusbuf
                                           	global	_flag1
                                           	global	_key_sleep_count
                                           	global	_key_filtter
                                           	global	_key_scan_count
                                           	global	_key_level
                                           	global	_key_press_10ms_count
                                           	global	_light_mode
                                           	global	_sleep_enalbe
                                           	global	_timer0_flag
                                           
                                           	global STK06
                                           	global STK05
                                           	global STK04
                                           	global STK03
                                           	global STK02
                                           	global STK01
                                           	global STK00
                                           
                                           sharebank udata_ovr 0x0010
                                           STK06	res 1
                                           STK05	res 1
                                           STK04	res 1
                                           STK03	res 1
                                           STK02	res 1
                                           STK01	res 1
                                           STK00	res 1
                                           
                                           ;--------------------------------------------------------
                                           ; global definitions
                                           ;--------------------------------------------------------
                                           UD_MC30P6250_C_0	udata
                                           _abuf	res	1
                                           
                                           UD_MC30P6250_C_1	udata
                                           _statusbuf	res	1
                                           
                                           UD_MC30P6250_C_2	udata
                                           _flag1	res	1
                                           
                                           UD_MC30P6250_C_3	udata
                                           _key_sleep_count	res	1
                                           
                                           UD_MC30P6250_C_4	udata
                                           _key_filtter	res	1
                                           
                                           UD_MC30P6250_C_5	udata
                                           _key_scan_count	res	1
                                           
                                           UD_MC30P6250_C_6	udata
                                           _key_level	res	1
                                           
                                           UD_MC30P6250_C_7	udata
                                           _key_press_10ms_count	res	1
                                           
                                           UD_MC30P6250_C_8	udata
                                           _light_mode	res	1
                                           
                                           UD_MC30P6250_C_9	udata
                                           _sleep_enalbe	res	1
                                           
                                           UD_MC30P6250_C_10	udata
                                           _timer0_flag	res	1
                                           
                                           ;--------------------------------------------------------
                                           ; absolute symbol definitions
                                           ;--------------------------------------------------------
                                           ;--------------------------------------------------------
                                           ; compiler-defined variables
                                           ;--------------------------------------------------------
                                           UDL_MC30P6250_C_0	udata
                                           r0x1015	res	1
                                           r0x1014	res	1
                                           r0x1016	res	1
                                           r0x1017	res	1
                                           r0x1018	res	1
                                           r0x1019	res	1
                                           _rt_detect_event_switch_mode_count_65536_37	res	2
                                           _rt_detect_event_Statue_65536_37	res	1
                                           _rt_detect_event_pluse_count_65536_37	res	1
                                           _rt_detect_event_pluse_time_65536_37	res	1
                                           _int_isr_cnt_196608_73	res	2
                                           _int_isr_cnt_196608_77	res	2
                                           _int_isr_loop_cnt_196608_81	res	2
                                           ;--------------------------------------------------------
                                           ; initialized data
                                           ;--------------------------------------------------------
                                           
                                           ;@Allocation info for local variables in function 'delay_ms'
                                           ;@delay_ms CLR_RAM                   Allocated to registers ;size:2
                                           ;@delay_ms IO_Init                   Allocated to registers ;size:2
                                           ;@delay_ms TIMER0_INT_Init           Allocated to registers ;size:2
                                           ;@delay_ms TIMER1_PWM_Init           Allocated to registers ;size:2
                                           ;@delay_ms Sys_Init                  Allocated to registers ;size:2
                                           ;@delay_ms params_init               Allocated to registers ;size:2
                                           ;@delay_ms delay_ms                  Allocated to registers ;size:2
                                           ;@delay_ms INDFbits                  Allocated to registers ;size:1
                                           ;@delay_ms T0CNTbits                 Allocated to registers ;size:1
                                           ;@delay_ms PCLbits                   Allocated to registers ;size:1
                                           ;@delay_ms STATUSbits                Allocated to registers ;size:1
                                           ;@delay_ms FSRbits                   Allocated to registers ;size:1
                                           ;@delay_ms P1bits                    Allocated to registers ;size:1
                                           ;@delay_ms MCRbits                   Allocated to registers ;size:1
                                           ;@delay_ms P1KBCRbits                Allocated to registers ;size:1
                                           ;@delay_ms PCLATHbits                Allocated to registers ;size:1
                                           ;@delay_ms PDCONbits                 Allocated to registers ;size:1
                                           ;@delay_ms ODCONbits                 Allocated to registers ;size:1
                                           ;@delay_ms PUCONbits                 Allocated to registers ;size:1
                                           ;@delay_ms INTEbits                  Allocated to registers ;size:1
                                           ;@delay_ms INTFbits                  Allocated to registers ;size:1
                                           ;@delay_ms T0CRbits                  Allocated to registers ;size:1
                                           ;@delay_ms T1DATDbits                Allocated to registers ;size:1
                                           ;@delay_ms DDR1bits                  Allocated to registers ;size:1
                                           ;@delay_ms PWM1CR1bits               Allocated to registers ;size:1
                                           ;@delay_ms PWM1CR0bits               Allocated to registers ;size:1
                                           ;@delay_ms T1DATBbits                Allocated to registers ;size:1
                                           ;@delay_ms T1DATCbits                Allocated to registers ;size:1
                                           ;@delay_ms TM0CRbits                 Allocated to registers ;size:1
                                           ;@delay_ms T1CRbits                  Allocated to registers ;size:1
                                           ;@delay_ms T1CNTbits                 Allocated to registers ;size:1
                                           ;@delay_ms T1LOADbits                Allocated to registers ;size:1
                                           ;@delay_ms T1DATAbits                Allocated to registers ;size:1
                                           ;@delay_ms CMPCR0bits                Allocated to registers ;size:1
                                           ;@delay_ms CMPCR1bits                Allocated to registers ;size:1
                                           ;@delay_ms CMPCR2bits                Allocated to registers ;size:1
                                           ;@delay_ms abuf                      Allocated to registers ;size:1
                                           ;@delay_ms statusbuf                 Allocated to registers ;size:1
                                           ;@delay_ms flag1                     Allocated to registers ;size:1
                                           ;@delay_ms key_sleep_count           Allocated to registers ;size:1
                                           ;@delay_ms key_filtter               Allocated to registers ;size:1
                                           ;@delay_ms key_scan_count            Allocated to registers ;size:1
                                           ;@delay_ms key_level                 Allocated to registers ;size:1
                                           ;@delay_ms key_press_10ms_count      Allocated to registers ;size:1
                                           ;@delay_ms light_mode                Allocated to registers ;size:1
                                           ;@delay_ms sleep_enalbe              Allocated to registers ;size:1
                                           ;@delay_ms timer0_flag               Allocated to registers ;size:1
                                           ;@delay_ms xms                       Allocated to registers ;size:2
                                           ;@delay_ms i                         Allocated to registers r0x1016 r0x1017 ;size:2
                                           ;@delay_ms INDF                      Allocated to registers ;size:1
                                           ;@delay_ms T0CNT                     Allocated to registers ;size:1
                                           ;@delay_ms PCL                       Allocated to registers ;size:1
                                           ;@delay_ms STATUS                    Allocated to registers ;size:1
                                           ;@delay_ms FSR                       Allocated to registers ;size:1
                                           ;@delay_ms GPR1                      Allocated to registers ;size:1
                                           ;@delay_ms P1                        Allocated to registers ;size:1
                                           ;@delay_ms GPR0                      Allocated to registers ;size:1
                                           ;@delay_ms MCR                       Allocated to registers ;size:1
                                           ;@delay_ms P1KBCR                    Allocated to registers ;size:1
                                           ;@delay_ms PCLATH                    Allocated to registers ;size:1
                                           ;@delay_ms PDCON                     Allocated to registers ;size:1
                                           ;@delay_ms ODCON                     Allocated to registers ;size:1
                                           ;@delay_ms PUCON                     Allocated to registers ;size:1
                                           ;@delay_ms INTE                      Allocated to registers ;size:1
                                           ;@delay_ms INTF                      Allocated to registers ;size:1
                                           ;@delay_ms T0CR                      Allocated to registers ;size:1
                                           ;@delay_ms T1DATD                    Allocated to registers ;size:1
                                           ;@delay_ms DDR1                      Allocated to registers ;size:1
                                           ;@delay_ms PWM1CR1                   Allocated to registers ;size:1
                                           ;@delay_ms PWM1CR0                   Allocated to registers ;size:1
                                           ;@delay_ms T1DATB                    Allocated to registers ;size:1
                                           ;@delay_ms T1DATC                    Allocated to registers ;size:1
                                           ;@delay_ms TM0CR                     Allocated to registers ;size:1
                                           ;@delay_ms T1CR                      Allocated to registers ;size:1
                                           ;@delay_ms T1CNT                     Allocated to registers ;size:1
                                           ;@delay_ms T1LOAD                    Allocated to registers ;size:1
                                           ;@delay_ms T1DATA                    Allocated to registers ;size:1
                                           ;@delay_ms CMPCR0                    Allocated to registers ;size:1
                                           ;@delay_ms CMPCR1                    Allocated to registers ;size:1
                                           ;@delay_ms CMPCR2                    Allocated to registers ;size:1
                                           ;@end Allocation info for local variables in function 'delay_ms';
                                           ;@Allocation info for local variables in function 'C_RAM'
                                           ;@end Allocation info for local variables in function 'C_RAM';
                                           ;@Allocation info for local variables in function 'IO_Init'
                                           ;@end Allocation info for local variables in function 'IO_Init';
                                           ;@Allocation info for local variables in function 'TIMER0_INT_Init'
                                           ;@end Allocation info for local variables in function 'TIMER0_INT_Init';
                                           ;@Allocation info for local variables in function 'Sys_Init'
                                           ;@end Allocation info for local variables in function 'Sys_Init';
                                           ;@Allocation info for local variables in function 'params_init'
                                           ;@end Allocation info for local variables in function 'params_init';
                                           ;@Allocation info for local variables in function 'key_scan'
                                           ;@end Allocation info for local variables in function 'key_scan';
                                           ;@Allocation info for local variables in function 'light_mode_handle'
                                           ;@end Allocation info for local variables in function 'light_mode_handle';
                                           ;@Allocation info for local variables in function 'rt_detect_event'
                                           ;@rt_detect_event Statue                    Allocated to registers ;size:1
                                           ;@rt_detect_event pluse_count               Allocated to registers ;size:1
                                           ;@rt_detect_event pluse_time                Allocated to registers ;size:1
                                           ;@rt_detect_event switch_mode_count         Allocated to registers ;size:2
                                           ;@end Allocation info for local variables in function 'rt_detect_event';
                                           ;@Allocation info for local variables in function 'rt_detect_event'
                                           ;@rt_detect_event Statue                    Allocated to registers ;size:1
                                           ;@rt_detect_event pluse_count               Allocated to registers ;size:1
                                           ;@rt_detect_event pluse_time                Allocated to registers ;size:1
                                           ;@rt_detect_event switch_mode_count         Allocated to registers ;size:2
                                           ;@end Allocation info for local variables in function 'rt_detect_event';
                                           ;@Allocation info for local variables in function 'main'
                                           ;@end Allocation info for local variables in function 'main';
                                           ;@Allocation info for local variables in function 'int_isr'
                                           ;@int_isr cnt                       Allocated to registers ;size:2
                                           ;@int_isr cnt                       Allocated to registers ;size:2
                                           ;@int_isr loop_cnt                  Allocated to registers ;size:2
                                           ;@end Allocation info for local variables in function 'int_isr';
                                           ;@Allocation info for local variables in function 'int_isr'
                                           ;@int_isr cnt                       Allocated to registers ;size:2
                                           ;@int_isr cnt                       Allocated to registers ;size:2
                                           ;@int_isr loop_cnt                  Allocated to registers ;size:2
                                           ;@end Allocation info for local variables in function 'int_isr';
                                           
                                           ;--------------------------------------------------------
                                           ; overlayable items in internal ram 
                                           ;--------------------------------------------------------
                                           ;	udata_ovr
                                           ;--------------------------------------------------------
                                           ; reset vector 
                                           ;--------------------------------------------------------
                                           STARTUP	code 0x0000
000000   286b     goto    0x6b             	goto	_main
                                           ;--------------------------------------------------------
                                           ; interrupt and initialization code
                                           ;--------------------------------------------------------
                                           c_interrupt	code	0x8
                                           __sdcc_interrupt
                                           ;***
                                           ;  pBlock Stats: dbName = I
                                           ;***
                                           ;entry:  _int_isr	;Function start
                                           ; 0 exit points
                                           ;; Starting pCode block
                                           _int_isr	;Function start
                                           ; 0 exit points
                                           ;	.line	888; "MC30P6250_C.c"	__endasm;
                                           	;
000008   15a8     movra   0x28             	movra	_abuf;
000009   1103     swapar  0x3              	swapar	_STATUS;
00000a   15a9     movra   0x29             	movra	_statusbuf;
                                           	
                                           ;	.line	890; "MC30P6250_C.c"	if ((T0IF) && (T0IE))
00000b   300f     jbset   0xf, 0           	JBSET	_INTFbits,0
00000c   2866     goto    0x66             	GOTO	_00326_DS_
00000d   300e     jbset   0xe, 0           	JBSET	_INTEbits,0
00000e   2866     goto    0x66             	GOTO	_00326_DS_
                                           ;	.line	892; "MC30P6250_C.c"	T0IF = 0;
00000f   3c0f     bclr    0xf, 0           	BCLR	_INTFbits,0
                                           ;	.line	894; "MC30P6250_C.c"	T0CNT = 255 - 62; // 递增计数器，需要手动装载 (约500us)
000010   0bc1     movai   0xc1             	MOVAI	0xc1
000011   1581     movra   0x1              	MOVRA	_T0CNT
                                           ;	.line	898; "MC30P6250_C.c"	if (LIGHT_MODE_FLASH == light_mode)
000012   1630     movar   0x30             	MOVAR	_light_mode
000013   0802     xorai   0x2              	XORAI	0x02
000014   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000015   2830     goto    0x30             	GOTO	_00323_DS_
                                           ;	.line	901; "MC30P6250_C.c"	cnt++;
000016   19a2     incr    0x22             	INCR	_int_isr_cnt_196608_73
000017   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
000018   19a3     incr    0x23             	INCR	(_int_isr_cnt_196608_73 + 1)
                                           ;;unsigned compare: left < lit(0x190=400), size=2
                                           ;	.line	903; "MC30P6250_C.c"	if (cnt < 400)
000019   0b01     movai   0x1              	MOVAI	0x01
00001a   1223     rsubar  0x23             	RSUBAR	(_int_isr_cnt_196608_73 + 1)
00001b   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
00001c   281f     goto    0x1f             	GOTO	_00374_DS_
00001d   0b90     movai   0x90             	MOVAI	0x90
00001e   1222     rsubar  0x22             	RSUBAR	_int_isr_cnt_196608_73
                                           _00374_DS_
00001f   3403     jbclr   0x3, 0           	JBCLR	STATUS,0
000020   2823     goto    0x23             	GOTO	_00306_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	905; "MC30P6250_C.c"	P12D = 0;
000021   3d06     bclr    0x6, 0x2         	BCLR	_P1bits,2
000022   2864     goto    0x64             	GOTO	_00324_DS_
                                           ;;unsigned compare: left < lit(0x320=800), size=2
                                           _00306_DS_
                                           ;	.line	908; "MC30P6250_C.c"	else if (cnt < 800)
000023   0b03     movai   0x3              	MOVAI	0x03
000024   1223     rsubar  0x23             	RSUBAR	(_int_isr_cnt_196608_73 + 1)
000025   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000026   2829     goto    0x29             	GOTO	_00375_DS_
000027   0b20     movai   0x20             	MOVAI	0x20
000028   1222     rsubar  0x22             	RSUBAR	_int_isr_cnt_196608_73
                                           _00375_DS_
000029   3403     jbclr   0x3, 0           	JBCLR	STATUS,0
00002a   282d     goto    0x2d             	GOTO	_00303_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	910; "MC30P6250_C.c"	P12D = 1;
00002b   3906     bset    0x6, 0x2         	BSET	_P1bits,2
00002c   2864     goto    0x64             	GOTO	_00324_DS_
                                           _00303_DS_
                                           ;	.line	914; "MC30P6250_C.c"	cnt = 0;
00002d   1da2     clrr    0x22             	CLRR	_int_isr_cnt_196608_73
00002e   1da3     clrr    0x23             	CLRR	(_int_isr_cnt_196608_73 + 1)
00002f   2864     goto    0x64             	GOTO	_00324_DS_
                                           _00323_DS_
                                           ;	.line	917; "MC30P6250_C.c"	else if (LIGHT_MODE_FLASH_2 == light_mode)
000030   1630     movar   0x30             	MOVAR	_light_mode
000031   0803     xorai   0x3              	XORAI	0x03
000032   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000033   284e     goto    0x4e             	GOTO	_00320_DS_
                                           ;	.line	920; "MC30P6250_C.c"	cnt++;
000034   19a4     incr    0x24             	INCR	_int_isr_cnt_196608_77
000035   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
000036   19a5     incr    0x25             	INCR	(_int_isr_cnt_196608_77 + 1)
                                           ;;unsigned compare: left < lit(0xC8=200), size=2
                                           ;	.line	921; "MC30P6250_C.c"	if (cnt < 200)
000037   0b00     movai   0                	MOVAI	0x00
000038   1225     rsubar  0x25             	RSUBAR	(_int_isr_cnt_196608_77 + 1)
000039   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
00003a   283d     goto    0x3d             	GOTO	_00376_DS_
00003b   0bc8     movai   0xc8             	MOVAI	0xc8
00003c   1224     rsubar  0x24             	RSUBAR	_int_isr_cnt_196608_77
                                           _00376_DS_
00003d   3403     jbclr   0x3, 0           	JBCLR	STATUS,0
00003e   2841     goto    0x41             	GOTO	_00312_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	923; "MC30P6250_C.c"	P12D = 0;
00003f   3d06     bclr    0x6, 0x2         	BCLR	_P1bits,2
000040   2864     goto    0x64             	GOTO	_00324_DS_
                                           ;;unsigned compare: left < lit(0x190=400), size=2
                                           _00312_DS_
                                           ;	.line	925; "MC30P6250_C.c"	else if (cnt < 400)
000041   0b01     movai   0x1              	MOVAI	0x01
000042   1225     rsubar  0x25             	RSUBAR	(_int_isr_cnt_196608_77 + 1)
000043   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000044   2847     goto    0x47             	GOTO	_00377_DS_
000045   0b90     movai   0x90             	MOVAI	0x90
000046   1224     rsubar  0x24             	RSUBAR	_int_isr_cnt_196608_77
                                           _00377_DS_
000047   3403     jbclr   0x3, 0           	JBCLR	STATUS,0
000048   284b     goto    0x4b             	GOTO	_00309_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	927; "MC30P6250_C.c"	P12D = 1;
000049   3906     bset    0x6, 0x2         	BSET	_P1bits,2
00004a   2864     goto    0x64             	GOTO	_00324_DS_
                                           _00309_DS_
                                           ;	.line	931; "MC30P6250_C.c"	cnt = 0;
00004b   1da4     clrr    0x24             	CLRR	_int_isr_cnt_196608_77
00004c   1da5     clrr    0x25             	CLRR	(_int_isr_cnt_196608_77 + 1)
00004d   2864     goto    0x64             	GOTO	_00324_DS_
                                           _00320_DS_
                                           ;	.line	934; "MC30P6250_C.c"	else if (flag_is_enable_light_trigger_mode && LIGHT_MODE_TRIGGER == light_mode)
00004e   302a     jbset   0x2a, 0          	JBSET	_flag1,0
00004f   2864     goto    0x64             	GOTO	_00324_DS_
000050   1630     movar   0x30             	MOVAR	_light_mode
000051   0804     xorai   0x4              	XORAI	0x04
000052   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000053   2864     goto    0x64             	GOTO	_00324_DS_
                                           ;	.line	944; "MC30P6250_C.c"	loop_cnt++;
000054   19a6     incr    0x26             	INCR	_int_isr_loop_cnt_196608_81
000055   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
000056   19a7     incr    0x27             	INCR	(_int_isr_loop_cnt_196608_81 + 1)
                                           ;	.line	960; "MC30P6250_C.c"	P12D = 0;
000057   3d06     bclr    0x6, 0x2         	BCLR	_P1bits,2
                                           ;;unsigned compare: left < lit(0x190=400), size=2
                                           ;	.line	962; "MC30P6250_C.c"	if (loop_cnt >= 400)
000058   0b01     movai   0x1              	MOVAI	0x01
000059   1227     rsubar  0x27             	RSUBAR	(_int_isr_loop_cnt_196608_81 + 1)
00005a   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
00005b   285e     goto    0x5e             	GOTO	_00378_DS_
00005c   0b90     movai   0x90             	MOVAI	0x90
00005d   1226     rsubar  0x26             	RSUBAR	_int_isr_loop_cnt_196608_81
                                           _00378_DS_
00005e   3003     jbset   0x3, 0           	JBSET	STATUS,0
00005f   2864     goto    0x64             	GOTO	_00324_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	964; "MC30P6250_C.c"	P12D = 1; // 结束后关闭灯光
000060   3906     bset    0x6, 0x2         	BSET	_P1bits,2
                                           ;	.line	966; "MC30P6250_C.c"	loop_cnt = 0;
000061   1da6     clrr    0x26             	CLRR	_int_isr_loop_cnt_196608_81
000062   1da7     clrr    0x27             	CLRR	(_int_isr_loop_cnt_196608_81 + 1)
                                           ;	.line	967; "MC30P6250_C.c"	flag_is_enable_light_trigger_mode = 0;
000063   3c2a     bclr    0x2a, 0          	BCLR	_flag1,0
                                           _00324_DS_
                                           ;	.line	978; "MC30P6250_C.c"	timer0_flag = 1;
000064   0b01     movai   0x1              	MOVAI	0x01
000065   15b2     movra   0x32             	MOVRA	_timer0_flag
                                           _00326_DS_
                                           ;	.line	1003; "MC30P6250_C.c"	__endasm;
                                           	;
000066   1129     swapar  0x29             	swapar	_statusbuf;
000067   1583     movra   0x3              	movra	_STATUS;
000068   11a8     swapr   0x28             	swapr	_abuf;
000069   1128     swapar  0x28             	swapar	_abuf;
                                           	
                                           END_OF_INTERRUPT
                                           ;	.line	1004; "MC30P6250_C.c"	}
00006a   000d     retie                    	RETIE	
                                           
                                           ;--------------------------------------------------------
                                           ; code
                                           ;--------------------------------------------------------
                                           code_MC30P6250_C	code
                                           ;***
                                           ;  pBlock Stats: dbName = M
                                           ;***
                                           ;entry:  _main	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;functions called:
                                           ;   _Sys_Init
                                           ;   _light_mode_handle
                                           ;   _key_scan
                                           ;   _rt_detect_event
                                           ;   _delay_ms
                                           ;   _delay_ms
                                           ;   _delay_ms
                                           ;   _Sys_Init
                                           ;   _light_mode_handle
                                           ;   _key_scan
                                           ;   _rt_detect_event
                                           ;   _delay_ms
                                           ;   _delay_ms
                                           ;   _delay_ms
                                           ;1 compiler assigned register :
                                           ;   STK00
                                           ;; Starting pCode block
                                           _main	;Function start
                                           ; 2 exit points
                                           ;	.line	742; "MC30P6250_C.c"	Sys_Init();
00006b   2165     call    0x165            	CALL	_Sys_Init
                                           _00297_DS_
                                           ;	.line	755; "MC30P6250_C.c"	if (timer0_flag)
00006c   0b00     movai   0                	MOVAI	0x00
00006d   1732     orar    0x32             	ORAR	_timer0_flag
00006e   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
00006f   2874     goto    0x74             	GOTO	_00267_DS_
                                           ;	.line	757; "MC30P6250_C.c"	timer0_flag = 0;
000070   1db2     clrr    0x32             	CLRR	_timer0_flag
                                           ;	.line	759; "MC30P6250_C.c"	light_mode_handle();
000071   210f     call    0x10f            	CALL	_light_mode_handle
                                           ;	.line	760; "MC30P6250_C.c"	key_scan();
000072   211b     call    0x11b            	CALL	_key_scan
                                           ;	.line	762; "MC30P6250_C.c"	rt_detect_event();
000073   20c5     call    0xc5             	CALL	_rt_detect_event
                                           _00267_DS_
                                           ;	.line	766; "MC30P6250_C.c"	if (sleep_enalbe)
000074   0b00     movai   0                	MOVAI	0x00
000075   1731     orar    0x31             	ORAR	_sleep_enalbe
000076   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
000077   286c     goto    0x6c             	GOTO	_00297_DS_
                                           ;	.line	773; "MC30P6250_C.c"	GIE = 0;
000078   3f8e     bclr    0xe, 0x7         	BCLR	_INTEbits,7
                                           ;	.line	775; "MC30P6250_C.c"	P12D = 1; // 关闭灯光
000079   3906     bset    0x6, 0x2         	BSET	_P1bits,2
                                           ;	.line	777; "MC30P6250_C.c"	OSCILLATION_PIN1 = 0;
00007a   3c86     bclr    0x6, 0x1         	BCLR	_P1bits,1
                                           ;	.line	778; "MC30P6250_C.c"	OSCILLATION_PIN2 = 0;
00007b   3e06     bclr    0x6, 0x4         	BCLR	_P1bits,4
                                           ;	.line	780; "MC30P6250_C.c"	OSCILLATION_PIN3 = 0;
00007c   3e86     bclr    0x6, 0x5         	BCLR	_P1bits,5
                                           ;	.line	784; "MC30P6250_C.c"	key_sleep_count = 0;
00007d   1dab     clrr    0x2b             	CLRR	_key_sleep_count
                                           _00274_DS_
                                           ;	.line	792; "MC30P6250_C.c"	delay_ms(1);
00007e   0b01     movai   0x1              	MOVAI	0x01
00007f   1596     movra   0x16             	MOVRA	STK00
000080   0b00     movai   0                	MOVAI	0x00
000081   218e     call    0x18e            	CALL	_delay_ms
                                           ;	.line	793; "MC30P6250_C.c"	if (KEY_DET_PIN)
000082   3186     jbset   0x6, 0x3         	JBSET	_P1bits,3
000083   288a     goto    0x8a             	GOTO	_00271_DS_
                                           ;	.line	795; "MC30P6250_C.c"	key_sleep_count++;
000084   19ab     incr    0x2b             	INCR	_key_sleep_count
                                           ;;swapping arguments (AOP_TYPEs 1/3)
                                           ;;unsigned compare: left >= lit(0x65=101), size=1
                                           ;	.line	796; "MC30P6250_C.c"	if (key_sleep_count > 100)
000085   0b65     movai   0x65             	MOVAI	0x65
000086   122b     rsubar  0x2b             	RSUBAR	_key_sleep_count
000087   3003     jbset   0x3, 0           	JBSET	STATUS,0
000088   287e     goto    0x7e             	GOTO	_00274_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	798; "MC30P6250_C.c"	break;
000089   288c     goto    0x8c             	GOTO	_00275_DS_
                                           _00271_DS_
                                           ;	.line	803; "MC30P6250_C.c"	key_sleep_count = 0;
00008a   1dab     clrr    0x2b             	CLRR	_key_sleep_count
00008b   287e     goto    0x7e             	GOTO	_00274_DS_
                                           _00275_DS_
                                           ;	.line	807; "MC30P6250_C.c"	key_sleep_count = 1;
00008c   0b01     movai   0x1              	MOVAI	0x01
00008d   15ab     movra   0x2b             	MOVRA	_key_sleep_count
                                           _00289_DS_
                                           ;	.line	814; "MC30P6250_C.c"	if (KEY_DET_PIN == 0)
00008e   3586     jbclr   0x6, 0x3         	JBCLR	_P1bits,3
00008f   28a1     goto    0xa1             	GOTO	_00286_DS_
                                           ;	.line	818; "MC30P6250_C.c"	delay_ms(10);
000090   0b0a     movai   0xa              	MOVAI	0x0a
000091   1596     movra   0x16             	MOVRA	STK00
000092   0b00     movai   0                	MOVAI	0x00
000093   218e     call    0x18e            	CALL	_delay_ms
                                           ;;unsigned compare: left < lit(0xC8=200), size=1
                                           ;	.line	819; "MC30P6250_C.c"	if (key_sleep_count >= 200)
000094   0bc8     movai   0xc8             	MOVAI	0xc8
000095   122b     rsubar  0x2b             	RSUBAR	_key_sleep_count
000096   3003     jbset   0x3, 0           	JBSET	STATUS,0
000097   289f     goto    0x9f             	GOTO	_00277_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	821; "MC30P6250_C.c"	KBIF = 0;
000098   3c8f     bclr    0xf, 0x1         	BCLR	_INTFbits,1
                                           ;	.line	822; "MC30P6250_C.c"	KBIE = 1;
000099   388e     bset    0xe, 0x1         	BSET	_INTEbits,1
                                           ;	.line	823; "MC30P6250_C.c"	key_press_10ms_count = 200;
00009a   0bc8     movai   0xc8             	MOVAI	0xc8
00009b   15af     movra   0x2f             	MOVRA	_key_press_10ms_count
                                           ;	.line	824; "MC30P6250_C.c"	key_filtter = 0x00;
00009c   1dac     clrr    0x2c             	CLRR	_key_filtter
                                           ;	.line	825; "MC30P6250_C.c"	key_level = 0;
00009d   1dae     clrr    0x2e             	CLRR	_key_level
                                           ;	.line	826; "MC30P6250_C.c"	break;
00009e   28bb     goto    0xbb             	GOTO	_00290_DS_
                                           _00277_DS_
                                           ;	.line	828; "MC30P6250_C.c"	key_sleep_count++;
00009f   19ab     incr    0x2b             	INCR	_key_sleep_count
0000a0   288e     goto    0x8e             	GOTO	_00289_DS_
                                           _00286_DS_
                                           ;	.line	832; "MC30P6250_C.c"	if (key_sleep_count > 0)
0000a1   0b00     movai   0                	MOVAI	0x00
0000a2   172b     orar    0x2b             	ORAR	_key_sleep_count
0000a3   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
0000a4   288e     goto    0x8e             	GOTO	_00289_DS_
                                           ;	.line	834; "MC30P6250_C.c"	key_sleep_count--;
0000a5   1bab     decr    0x2b             	DECR	_key_sleep_count
                                           ;	.line	836; "MC30P6250_C.c"	delay_ms(1);
0000a6   0b01     movai   0x1              	MOVAI	0x01
0000a7   1596     movra   0x16             	MOVRA	STK00
0000a8   0b00     movai   0                	MOVAI	0x00
0000a9   218e     call    0x18e            	CALL	_delay_ms
                                           ;	.line	837; "MC30P6250_C.c"	if (key_sleep_count == 0)
0000aa   0b00     movai   0                	MOVAI	0x00
0000ab   172b     orar    0x2b             	ORAR	_key_sleep_count
0000ac   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
0000ad   288e     goto    0x8e             	GOTO	_00289_DS_
                                           ;	.line	840; "MC30P6250_C.c"	RT_DETECT_UNINIT();
0000ae   380d     bset    0xd, 0           	BSET	_PUCONbits,0
0000af   3a0b     bset    0xb, 0x4         	BSET	_PDCONbits,4
                                           ;	.line	842; "MC30P6250_C.c"	KEY_KB_INT_ENABLE = 1;
0000b0   3989     bset    0x9, 0x3         	BSET	_P1KBCRbits,3
                                           ;	.line	843; "MC30P6250_C.c"	KBIF = 0;
0000b1   3c8f     bclr    0xf, 0x1         	BCLR	_INTFbits,1
                                           ;	.line	844; "MC30P6250_C.c"	KBIE = 1;
0000b2   388e     bset    0xe, 0x1         	BSET	_INTEbits,1
                                           ;	.line	846; "MC30P6250_C.c"	Nop();
0000b3   0000     nop                      	nop	
                                           ;	.line	847; "MC30P6250_C.c"	Nop();
0000b4   0000     nop                      	nop	
                                           ;	.line	848; "MC30P6250_C.c"	Stop();
0000b5   000b     sleep                    	stop	
                                           ;	.line	849; "MC30P6250_C.c"	Nop();
0000b6   0000     nop                      	nop	
                                           ;	.line	850; "MC30P6250_C.c"	Nop();
0000b7   0000     nop                      	nop	
                                           ;	.line	851; "MC30P6250_C.c"	key_sleep_count = 1;
0000b8   0b01     movai   0x1              	MOVAI	0x01
0000b9   15ab     movra   0x2b             	MOVRA	_key_sleep_count
0000ba   288e     goto    0x8e             	GOTO	_00289_DS_
                                           _00290_DS_
                                           ;	.line	859; "MC30P6250_C.c"	sleep_enalbe = 0;
0000bb   1db1     clrr    0x31             	CLRR	_sleep_enalbe
                                           ;	.line	860; "MC30P6250_C.c"	flag_is_enable_light_trigger_mode = 1;
0000bc   382a     bset    0x2a, 0          	BSET	_flag1,0
                                           ;	.line	863; "MC30P6250_C.c"	RT_DETECT_ON();
0000bd   3c0d     bclr    0xd, 0           	BCLR	_PUCONbits,0
0000be   3a0b     bset    0xb, 0x4         	BSET	_PDCONbits,4
                                           ;	.line	865; "MC30P6250_C.c"	KEY_KB_INT_ENABLE = 0;
0000bf   3d89     bclr    0x9, 0x3         	BCLR	_P1KBCRbits,3
                                           ;	.line	866; "MC30P6250_C.c"	KBIE = 0;
0000c0   3c8e     bclr    0xe, 0x1         	BCLR	_INTEbits,1
                                           ;	.line	867; "MC30P6250_C.c"	KBIF = 0;
0000c1   3c8f     bclr    0xf, 0x1         	BCLR	_INTFbits,1
                                           ;	.line	869; "MC30P6250_C.c"	GIE = 1;
0000c2   3b8e     bset    0xe, 0x7         	BSET	_INTEbits,7
0000c3   286c     goto    0x6c             	GOTO	_00297_DS_
                                           ;	.line	874; "MC30P6250_C.c"	}
0000c4   000c     return                   	RETURN	
                                           ; exit point of _main
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _rt_detect_event	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;1 compiler assigned register :
                                           ;   r0x1014
                                           ;; Starting pCode block
                                           _rt_detect_event	;Function start
                                           ; 2 exit points
                                           ;	.line	654; "MC30P6250_C.c"	if (switch_mode_count > 0)
0000c5   161d     movar   0x1d             	MOVAR	_rt_detect_event_switch_mode_count_65536_37
0000c6   171e     orar    0x1e             	ORAR	(_rt_detect_event_switch_mode_count_65536_37 + 1)
0000c7   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
0000c8   28df     goto    0xdf             	GOTO	_00195_DS_
                                           ;	.line	656; "MC30P6250_C.c"	switch_mode_count--;
0000c9   0bff     movai   0xff             	MOVAI	0xff
0000ca   1f9d     addra   0x1d             	ADDRA	_rt_detect_event_switch_mode_count_65536_37
0000cb   3003     jbset   0x3, 0           	JBSET	STATUS,0
0000cc   1b9e     decr    0x1e             	DECR	(_rt_detect_event_switch_mode_count_65536_37 + 1)
                                           ;	.line	657; "MC30P6250_C.c"	if (switch_mode_count == 0)
0000cd   161d     movar   0x1d             	MOVAR	_rt_detect_event_switch_mode_count_65536_37
0000ce   171e     orar    0x1e             	ORAR	(_rt_detect_event_switch_mode_count_65536_37 + 1)
0000cf   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
0000d0   28e3     goto    0xe3             	GOTO	_00196_DS_
                                           ;	.line	659; "MC30P6250_C.c"	if (IS_RT_DETECT())
0000d1   320b     jbset   0xb, 0x4         	JBSET	_PDCONbits,4
0000d2   28d9     goto    0xd9             	GOTO	_00186_DS_
                                           ;	.line	661; "MC30P6250_C.c"	RT_DETECT_OFF();
0000d3   380d     bset    0xd, 0           	BSET	_PUCONbits,0
0000d4   3e0b     bclr    0xb, 0x4         	BCLR	_PDCONbits,4
                                           ;	.line	662; "MC30P6250_C.c"	switch_mode_count = 3;
0000d5   0b03     movai   0x3              	MOVAI	0x03
0000d6   159d     movra   0x1d             	MOVRA	_rt_detect_event_switch_mode_count_65536_37
0000d7   1d9e     clrr    0x1e             	CLRR	(_rt_detect_event_switch_mode_count_65536_37 + 1)
0000d8   28de     goto    0xde             	GOTO	_00191_DS_
                                           _00186_DS_
                                           ;	.line	666; "MC30P6250_C.c"	RT_DETECT_ON();
0000d9   3c0d     bclr    0xd, 0           	BCLR	_PUCONbits,0
0000da   3a0b     bset    0xb, 0x4         	BSET	_PDCONbits,4
                                           ;	.line	667; "MC30P6250_C.c"	switch_mode_count = 40;
0000db   0b28     movai   0x28             	MOVAI	0x28
0000dc   159d     movra   0x1d             	MOVRA	_rt_detect_event_switch_mode_count_65536_37
0000dd   1d9e     clrr    0x1e             	CLRR	(_rt_detect_event_switch_mode_count_65536_37 + 1)
                                           _00191_DS_
                                           ;	.line	669; "MC30P6250_C.c"	return; // 跳过这个周期，让上/下拉电阻有时间稳定电压
0000de   290e     goto    0x10e            	GOTO	_00214_DS_
                                           _00195_DS_
                                           ;	.line	674; "MC30P6250_C.c"	switch_mode_count = 1;
0000df   0b01     movai   0x1              	MOVAI	0x01
0000e0   159d     movra   0x1d             	MOVRA	_rt_detect_event_switch_mode_count_65536_37
0000e1   1d9e     clrr    0x1e             	CLRR	(_rt_detect_event_switch_mode_count_65536_37 + 1)
                                           ;	.line	675; "MC30P6250_C.c"	return;
0000e2   290e     goto    0x10e            	GOTO	_00214_DS_
                                           _00196_DS_
                                           ;	.line	686; "MC30P6250_C.c"	if (IS_RT_DETECT())
0000e3   320b     jbset   0xb, 0x4         	JBSET	_PDCONbits,4
0000e4   290a     goto    0x10a            	GOTO	_00212_DS_
                                           ;;100	MOVAR	_rt_detect_event_Statue_65536_37
                                           ;;99	MOVAR	r0x1014
                                           ;	.line	689; "MC30P6250_C.c"	switch (Statue)
0000e5   161f     movar   0x1f             	MOVAR	_rt_detect_event_Statue_65536_37
0000e6   1598     movra   0x18             	MOVRA	r0x1014
0000e7   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
0000e8   28ea     goto    0xea             	GOTO	_00260_DS_
0000e9   28f0     goto    0xf0             	GOTO	_00197_DS_
                                           _00260_DS_
0000ea   1618     movar   0x18             	MOVAR	r0x1014
0000eb   0801     xorai   0x1              	XORAI	0x01
0000ec   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
0000ed   28ef     goto    0xef             	GOTO	_00261_DS_
0000ee   28f5     goto    0xf5             	GOTO	_00200_DS_
                                           _00261_DS_
0000ef   2902     goto    0x102            	GOTO	_00206_DS_
                                           _00197_DS_
                                           ;	.line	692; "MC30P6250_C.c"	if (!RT_CHARGE_DET_PIN) // 由高电平转为低电平回复常态
0000f0   3406     jbclr   0x6, 0           	JBCLR	_P1bits,0
0000f1   2902     goto    0x102            	GOTO	_00206_DS_
                                           ;	.line	694; "MC30P6250_C.c"	Statue = 1;
0000f2   0b01     movai   0x1              	MOVAI	0x01
0000f3   159f     movra   0x1f             	MOVRA	_rt_detect_event_Statue_65536_37
                                           ;	.line	696; "MC30P6250_C.c"	break;
0000f4   2902     goto    0x102            	GOTO	_00206_DS_
                                           _00200_DS_
                                           ;	.line	699; "MC30P6250_C.c"	if (RT_CHARGE_DET_PIN) // 由低电平转为高电平加1
0000f5   3006     jbset   0x6, 0           	JBSET	_P1bits,0
0000f6   28fb     goto    0xfb             	GOTO	_00204_DS_
                                           ;	.line	701; "MC30P6250_C.c"	Statue = 0;
0000f7   1d9f     clrr    0x1f             	CLRR	_rt_detect_event_Statue_65536_37
                                           ;	.line	702; "MC30P6250_C.c"	pluse_count++;
0000f8   19a0     incr    0x20             	INCR	_rt_detect_event_pluse_count_65536_37
                                           ;	.line	703; "MC30P6250_C.c"	pluse_time = 0;
0000f9   1da1     clrr    0x21             	CLRR	_rt_detect_event_pluse_time_65536_37
0000fa   2902     goto    0x102            	GOTO	_00206_DS_
                                           _00204_DS_
                                           ;	.line	707; "MC30P6250_C.c"	pluse_time++;
0000fb   19a1     incr    0x21             	INCR	_rt_detect_event_pluse_time_65536_37
                                           ;;unsigned compare: left < lit(0x96=150), size=1
                                           ;	.line	708; "MC30P6250_C.c"	if (pluse_time >= 150)
0000fc   0b96     movai   0x96             	MOVAI	0x96
0000fd   1221     rsubar  0x21             	RSUBAR	_rt_detect_event_pluse_time_65536_37
0000fe   3003     jbset   0x3, 0           	JBSET	STATUS,0
0000ff   2902     goto    0x102            	GOTO	_00206_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	710; "MC30P6250_C.c"	pluse_time = 0;
000100   1da1     clrr    0x21             	CLRR	_rt_detect_event_pluse_time_65536_37
                                           ;	.line	711; "MC30P6250_C.c"	pluse_count = 0;
000101   1da0     clrr    0x20             	CLRR	_rt_detect_event_pluse_count_65536_37
                                           ;;unsigned compare: left < lit(0x5=5), size=1
                                           _00206_DS_
                                           ;	.line	717; "MC30P6250_C.c"	if (pluse_count >= 5) // lmd_buf[sys_ctl.lmd_num-1])//灵敏度调节参数,越少越敏感
000102   0b05     movai   0x5              	MOVAI	0x05
000103   1220     rsubar  0x20             	RSUBAR	_rt_detect_event_pluse_count_65536_37
000104   3003     jbset   0x3, 0           	JBSET	STATUS,0
000105   290e     goto    0x10e            	GOTO	_00214_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	719; "MC30P6250_C.c"	pluse_count = 0;
000106   1da0     clrr    0x20             	CLRR	_rt_detect_event_pluse_count_65536_37
                                           ;	.line	720; "MC30P6250_C.c"	pluse_time = 0;
000107   1da1     clrr    0x21             	CLRR	_rt_detect_event_pluse_time_65536_37
                                           ;	.line	726; "MC30P6250_C.c"	flag_is_enable_light_trigger_mode = 1;
000108   382a     bset    0x2a, 0          	BSET	_flag1,0
000109   290e     goto    0x10e            	GOTO	_00214_DS_
                                           _00212_DS_
                                           ;	.line	732; "MC30P6250_C.c"	if (RT_CHARGE_DET_PIN)
00010a   3006     jbset   0x6, 0           	JBSET	_P1bits,0
00010b   290e     goto    0x10e            	GOTO	_00214_DS_
                                           ;	.line	733; "MC30P6250_C.c"	sleep_enalbe = 1;
00010c   0b01     movai   0x1              	MOVAI	0x01
00010d   15b1     movra   0x31             	MOVRA	_sleep_enalbe
                                           _00214_DS_
                                           ;	.line	735; "MC30P6250_C.c"	}
00010e   000c     return                   	RETURN	
                                           ; exit point of _rt_detect_event
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _light_mode_handle	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;; Starting pCode block
                                           _light_mode_handle	;Function start
                                           ; 2 exit points
                                           ;	.line	336; "MC30P6250_C.c"	if (LIGHT_MODE_ALWAYS_ON == light_mode)
00010f   1630     movar   0x30             	MOVAR	_light_mode
000110   0801     xorai   0x1              	XORAI	0x01
000111   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000112   2915     goto    0x115            	GOTO	_00166_DS_
                                           ;	.line	338; "MC30P6250_C.c"	P12D = 0;
000113   3d06     bclr    0x6, 0x2         	BCLR	_P1bits,2
000114   291a     goto    0x11a            	GOTO	_00168_DS_
                                           _00166_DS_
                                           ;	.line	340; "MC30P6250_C.c"	else if (LIGHT_MODE_FLASH == light_mode)
000115   1630     movar   0x30             	MOVAR	_light_mode
000116   0802     xorai   0x2              	XORAI	0x02
000117   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000118   291a     goto    0x11a            	GOTO	_00168_DS_
000119   291a     goto    0x11a            	GOTO	_00168_DS_
                                           _00168_DS_
                                           ;	.line	351; "MC30P6250_C.c"	}
00011a   000c     return                   	RETURN	
                                           ; exit point of _light_mode_handle
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _key_scan	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;1 compiler assigned register :
                                           ;   r0x1014
                                           ;; Starting pCode block
                                           _key_scan	;Function start
                                           ; 2 exit points
                                           ;	.line	280; "MC30P6250_C.c"	key_scan_count++;
00011b   19ad     incr    0x2d             	INCR	_key_scan_count
                                           ;;unsigned compare: left < lit(0xA=10), size=1
                                           ;	.line	281; "MC30P6250_C.c"	if (key_scan_count >= 10)
00011c   0b0a     movai   0xa              	MOVAI	0x0a
00011d   122d     rsubar  0x2d             	RSUBAR	_key_scan_count
00011e   3003     jbset   0x3, 0           	JBSET	STATUS,0
00011f   2958     goto    0x158            	GOTO	_00157_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	283; "MC30P6250_C.c"	key_scan_count = 0;
000120   1dad     clrr    0x2d             	CLRR	_key_scan_count
                                           ;	.line	285; "MC30P6250_C.c"	key_filtter <<= 1;
000121   162c     movar   0x2c             	MOVAR	_key_filtter
000122   1598     movra   0x18             	MOVRA	r0x1014
000123   3c03     bclr    0x3, 0           	BCLR	STATUS,0
000124   1418     rlar    0x18             	RLAR	r0x1014
000125   15ac     movra   0x2c             	MOVRA	_key_filtter
                                           ;	.line	286; "MC30P6250_C.c"	if (KEY_DET_PIN)
000126   3186     jbset   0x6, 0x3         	JBSET	_P1bits,3
000127   2929     goto    0x129            	GOTO	_00137_DS_
                                           ;	.line	287; "MC30P6250_C.c"	key_filtter |= 0x01;
000128   382c     bset    0x2c, 0          	BSET	_key_filtter,0
                                           _00137_DS_
                                           ;	.line	289; "MC30P6250_C.c"	key_filtter &= KEY_FILTTER_PARAM;
000129   0b0f     movai   0xf              	MOVAI	0x0f
00012a   1eac     andra   0x2c             	ANDRA	_key_filtter
                                           ;	.line	290; "MC30P6250_C.c"	if (key_filtter == KEY_FILTTER_PARAM)
00012b   162c     movar   0x2c             	MOVAR	_key_filtter
00012c   080f     xorai   0xf              	XORAI	0x0f
00012d   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
00012e   2932     goto    0x132            	GOTO	_00141_DS_
                                           ;	.line	291; "MC30P6250_C.c"	key_level = 1;
00012f   0b01     movai   0x1              	MOVAI	0x01
000130   15ae     movra   0x2e             	MOVRA	_key_level
000131   2937     goto    0x137            	GOTO	_00142_DS_
                                           _00141_DS_
                                           ;	.line	292; "MC30P6250_C.c"	else if (key_filtter == 0)
000132   0b00     movai   0                	MOVAI	0x00
000133   172c     orar    0x2c             	ORAR	_key_filtter
000134   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000135   2937     goto    0x137            	GOTO	_00142_DS_
                                           ;	.line	293; "MC30P6250_C.c"	key_level = 0;
000136   1dae     clrr    0x2e             	CLRR	_key_level
                                           _00142_DS_
                                           ;	.line	295; "MC30P6250_C.c"	if (key_level == 0)
000137   0b00     movai   0                	MOVAI	0x00
000138   172e     orar    0x2e             	ORAR	_key_level
000139   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
00013a   2947     goto    0x147            	GOTO	_00153_DS_
                                           ;;swapping arguments (AOP_TYPEs 1/3)
                                           ;;unsigned compare: left >= lit(0xC9=201), size=1
                                           ;	.line	297; "MC30P6250_C.c"	if (key_press_10ms_count <= 200)
00013b   0bc9     movai   0xc9             	MOVAI	0xc9
00013c   122f     rsubar  0x2f             	RSUBAR	_key_press_10ms_count
00013d   3403     jbclr   0x3, 0           	JBCLR	STATUS,0
00013e   2940     goto    0x140            	GOTO	_00144_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	299; "MC30P6250_C.c"	key_press_10ms_count++;
00013f   19af     incr    0x2f             	INCR	_key_press_10ms_count
                                           _00144_DS_
                                           ;	.line	300; "MC30P6250_C.c"	if (key_press_10ms_count == 200)
000140   162f     movar   0x2f             	MOVAR	_key_press_10ms_count
000141   08c8     xorai   0xc8             	XORAI	0xc8
000142   3103     jbset   0x3, 0x2         	JBSET	STATUS,2
000143   2958     goto    0x158            	GOTO	_00157_DS_
                                           ;	.line	302; "MC30P6250_C.c"	sleep_enalbe = 1;
000144   0b01     movai   0x1              	MOVAI	0x01
000145   15b1     movra   0x31             	MOVRA	_sleep_enalbe
000146   2958     goto    0x158            	GOTO	_00157_DS_
                                           ;;swapping arguments (AOP_TYPEs 1/3)
                                           ;;unsigned compare: left >= lit(0x15=21), size=1
                                           _00153_DS_
                                           ;	.line	307; "MC30P6250_C.c"	if (key_press_10ms_count > 20 && key_press_10ms_count < 200)
000147   0b15     movai   0x15             	MOVAI	0x15
000148   122f     rsubar  0x2f             	RSUBAR	_key_press_10ms_count
000149   3003     jbset   0x3, 0           	JBSET	STATUS,0
00014a   2957     goto    0x157            	GOTO	_00150_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;;unsigned compare: left < lit(0xC8=200), size=1
00014b   0bc8     movai   0xc8             	MOVAI	0xc8
00014c   122f     rsubar  0x2f             	RSUBAR	_key_press_10ms_count
00014d   3403     jbclr   0x3, 0           	JBCLR	STATUS,0
00014e   2957     goto    0x157            	GOTO	_00150_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	322; "MC30P6250_C.c"	light_mode++;
00014f   19b0     incr    0x30             	INCR	_light_mode
                                           ;	.line	323; "MC30P6250_C.c"	flag_is_enable_light_trigger_mode = 1;
000150   382a     bset    0x2a, 0          	BSET	_flag1,0
                                           ;;swapping arguments (AOP_TYPEs 1/3)
                                           ;;unsigned compare: left >= lit(0x5=5), size=1
                                           ;	.line	324; "MC30P6250_C.c"	if (light_mode > LIGHT_MODE_TRIGGER)
000151   0b05     movai   0x5              	MOVAI	0x05
000152   1230     rsubar  0x30             	RSUBAR	_light_mode
000153   3003     jbset   0x3, 0           	JBSET	STATUS,0
000154   2957     goto    0x157            	GOTO	_00150_DS_
                                           ;;genSkipc:3291: created from rifx:013B5EFC
                                           ;	.line	326; "MC30P6250_C.c"	light_mode = LIGHT_MODE_ALWAYS_ON;
000155   0b01     movai   0x1              	MOVAI	0x01
000156   15b0     movra   0x30             	MOVRA	_light_mode
                                           _00150_DS_
                                           ;	.line	329; "MC30P6250_C.c"	key_press_10ms_count = 0;
000157   1daf     clrr    0x2f             	CLRR	_key_press_10ms_count
                                           _00157_DS_
                                           ;	.line	332; "MC30P6250_C.c"	}
000158   000c     return                   	RETURN	
                                           ; exit point of _key_scan
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _params_init	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;; Starting pCode block
                                           _params_init	;Function start
                                           ; 2 exit points
                                           ;	.line	259; "MC30P6250_C.c"	key_sleep_count = 0;
000159   1dab     clrr    0x2b             	CLRR	_key_sleep_count
                                           ;	.line	261; "MC30P6250_C.c"	key_filtter = 0xFF;
00015a   0bff     movai   0xff             	MOVAI	0xff
00015b   15ac     movra   0x2c             	MOVRA	_key_filtter
                                           ;	.line	262; "MC30P6250_C.c"	key_level = 1;
00015c   0b01     movai   0x1              	MOVAI	0x01
00015d   15ae     movra   0x2e             	MOVRA	_key_level
                                           ;	.line	263; "MC30P6250_C.c"	key_scan_count = 0;
00015e   1dad     clrr    0x2d             	CLRR	_key_scan_count
                                           ;	.line	264; "MC30P6250_C.c"	key_press_10ms_count = 0;
00015f   1daf     clrr    0x2f             	CLRR	_key_press_10ms_count
                                           ;	.line	266; "MC30P6250_C.c"	sleep_enalbe = 1;
000160   0b01     movai   0x1              	MOVAI	0x01
000161   15b1     movra   0x31             	MOVRA	_sleep_enalbe
                                           ;	.line	272; "MC30P6250_C.c"	light_mode = LIGHT_MODE_ALWAYS_ON;
000162   0b01     movai   0x1              	MOVAI	0x01
000163   15b0     movra   0x30             	MOVRA	_light_mode
                                           ;	.line	275; "MC30P6250_C.c"	}
000164   000c     return                   	RETURN	
                                           ; exit point of _params_init
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _Sys_Init	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;functions called:
                                           ;   _C_RAM
                                           ;   _params_init
                                           ;   _IO_Init
                                           ;   _TIMER0_INT_Init
                                           ;   _delay_ms
                                           ;   _C_RAM
                                           ;   _params_init
                                           ;   _IO_Init
                                           ;   _TIMER0_INT_Init
                                           ;   _delay_ms
                                           ;1 compiler assigned register :
                                           ;   STK00
                                           ;; Starting pCode block
                                           _Sys_Init	;Function start
                                           ; 2 exit points
                                           ;	.line	242; "MC30P6250_C.c"	GIE = 0;
000165   3f8e     bclr    0xe, 0x7         	BCLR	_INTEbits,7
                                           ;	.line	243; "MC30P6250_C.c"	C_RAM();
000166   2184     call    0x184            	CALL	_C_RAM
                                           ;	.line	244; "MC30P6250_C.c"	params_init();
000167   2159     call    0x159            	CALL	_params_init
                                           ;	.line	245; "MC30P6250_C.c"	IO_Init();
000168   2176     call    0x176            	CALL	_IO_Init
                                           ;	.line	246; "MC30P6250_C.c"	TIMER0_INT_Init();
000169   2170     call    0x170            	CALL	_TIMER0_INT_Init
                                           ;	.line	250; "MC30P6250_C.c"	delay_ms(1);
00016a   0b01     movai   0x1              	MOVAI	0x01
00016b   1596     movra   0x16             	MOVRA	STK00
00016c   0b00     movai   0                	MOVAI	0x00
00016d   218e     call    0x18e            	CALL	_delay_ms
                                           ;	.line	251; "MC30P6250_C.c"	GIE = 1;
00016e   3b8e     bset    0xe, 0x7         	BSET	_INTEbits,7
                                           ;	.line	252; "MC30P6250_C.c"	}
00016f   000c     return                   	RETURN	
                                           ; exit point of _Sys_Init
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _TIMER0_INT_Init	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;; Starting pCode block
                                           _TIMER0_INT_Init	;Function start
                                           ; 2 exit points
                                           ;	.line	208; "MC30P6250_C.c"	T0CR = (0x01 << 2) | (0x01 << 0); // 时钟为CPU时钟  预分频器分配给T0而不是WDT  定时器64分频
000170   0b05     movai   0x5              	MOVAI	0x05
000171   15c1     movra   0x41             	MOVRA	_T0CR
                                           ;	.line	210; "MC30P6250_C.c"	T0CNT = 255 - 62; // 递增计数器，需要手动装载
000172   0bc1     movai   0xc1             	MOVAI	0xc1
000173   1581     movra   0x1              	MOVRA	_T0CNT
                                           ;	.line	211; "MC30P6250_C.c"	T0IE = 1;
000174   380e     bset    0xe, 0           	BSET	_INTEbits,0
                                           ;	.line	212; "MC30P6250_C.c"	}
000175   000c     return                   	RETURN	
                                           ; exit point of _TIMER0_INT_Init
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _IO_Init	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;; Starting pCode block
                                           _IO_Init	;Function start
                                           ; 2 exit points
                                           ;	.line	186; "MC30P6250_C.c"	P1 = 0x01 << 2; // P12默认输出高电平，不点亮灯光
000176   0b04     movai   0x4              	MOVAI	0x04
000177   1586     movra   0x6              	MOVRA	_P1
                                           ;	.line	187; "MC30P6250_C.c"	DDR1 = 0x00;    // 1:input 0:output
000178   1dc6     clrr    0x46             	CLRR	_DDR1
                                           ;	.line	188; "MC30P6250_C.c"	PUCON = 0xff;   // 0:Effective 1:invalid
000179   0bff     movai   0xff             	MOVAI	0xff
00017a   158d     movra   0xd              	MOVRA	_PUCON
                                           ;	.line	189; "MC30P6250_C.c"	PDCON = 0xff;   // 0:Effective 1:invalid
00017b   0bff     movai   0xff             	MOVAI	0xff
00017c   158b     movra   0xb              	MOVRA	_PDCON
                                           ;	.line	190; "MC30P6250_C.c"	ODCON = 0x00;   // 0:推挽输出  1:开漏输出
00017d   1d8c     clrr    0xc              	CLRR	_ODCON
                                           ;	.line	192; "MC30P6250_C.c"	KEY_DETECT_INIT();
00017e   39c6     bset    0x46, 0x3        	BSET	_DDR1bits,3
00017f   3d8d     bclr    0xd, 0x3         	BCLR	_PUCONbits,3
                                           ;	.line	194; "MC30P6250_C.c"	RT_DETECT_INIT();
000180   3846     bset    0x46, 0          	BSET	_DDR1bits,0
000181   3c0d     bclr    0xd, 0           	BCLR	_PUCONbits,0
000182   3a0b     bset    0xb, 0x4         	BSET	_PDCONbits,4
                                           ;	.line	196; "MC30P6250_C.c"	}
000183   000c     return                   	RETURN	
                                           ; exit point of _IO_Init
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _C_RAM	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;; Starting pCode block
                                           _C_RAM	;Function start
                                           ; 2 exit points
                                           ;	.line	174; "MC30P6250_C.c"	__endasm;
                                           	;
000184   0b40     movai   0x40             	movai	0x40;
000185   1584     movra   0x4              	movra	FSR;
000186   0b30     movai   0x30             	movai	48;
000187   1587     movra   0x7              	movra	0x07;
000188   1b84     decr    0x4              	decr	FSR;
000189   1d80     clrr    0                	clrr	INDF;
00018a   1a87     djzr    0x7              	djzr	0x07;
00018b   2988     goto    0x188            	goto	$ - 3;
00018c   1d87     clrr    0x7              	clrr	0x07;
                                           	
                                           ;	.line	175; "MC30P6250_C.c"	}
00018d   000c     return                   	RETURN	
                                           ; exit point of _C_RAM
                                           
                                           ;***
                                           ;  pBlock Stats: dbName = C
                                           ;***
                                           ;entry:  _delay_ms	;Function start
                                           ; 2 exit points
                                           ;has an exit
                                           ;7 compiler assigned registers:
                                           ;   r0x1014
                                           ;   STK00
                                           ;   r0x1015
                                           ;   r0x1016
                                           ;   r0x1017
                                           ;   r0x1018
                                           ;   r0x1019
                                           ;; Starting pCode block
                                           _delay_ms	;Function start
                                           ; 2 exit points
                                           ;	.line	139; "MC30P6250_C.c"	void delay_ms(u16 xms)
00018e   1598     movra   0x18             	MOVRA	r0x1014
00018f   1616     movar   0x16             	MOVAR	STK00
000190   1597     movra   0x17             	MOVRA	r0x1015
                                           _00108_DS_
                                           ;	.line	141; "MC30P6250_C.c"	while (xms)
000191   1617     movar   0x17             	MOVAR	r0x1015
000192   1718     orar    0x18             	ORAR	r0x1014
000193   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
000194   29ad     goto    0x1ad            	GOTO	_00111_DS_
                                           ;	.line	144; "MC30P6250_C.c"	while (i--)
000195   0b17     movai   0x17             	MOVAI	0x17
000196   1599     movra   0x19             	MOVRA	r0x1016
000197   0b02     movai   0x2              	MOVAI	0x02
000198   159a     movra   0x1a             	MOVRA	r0x1017
                                           _00105_DS_
000199   1619     movar   0x19             	MOVAR	r0x1016
00019a   159b     movra   0x1b             	MOVRA	r0x1018
00019b   161a     movar   0x1a             	MOVAR	r0x1017
00019c   159c     movra   0x1c             	MOVRA	r0x1019
00019d   0bff     movai   0xff             	MOVAI	0xff
00019e   1f99     addra   0x19             	ADDRA	r0x1016
00019f   3003     jbset   0x3, 0           	JBSET	STATUS,0
0001a0   1b9a     decr    0x1a             	DECR	r0x1017
0001a1   161b     movar   0x1b             	MOVAR	r0x1018
0001a2   171c     orar    0x1c             	ORAR	r0x1019
0001a3   3503     jbclr   0x3, 0x2         	JBCLR	STATUS,2
0001a4   29a7     goto    0x1a7            	GOTO	_00107_DS_
                                           ;	.line	146; "MC30P6250_C.c"	Nop();
0001a5   0000     nop                      	nop	
0001a6   2999     goto    0x199            	GOTO	_00105_DS_
                                           _00107_DS_
                                           ;	.line	148; "MC30P6250_C.c"	xms--; // 把 --操作放在while()判断条件外面，更节省空间
0001a7   0bff     movai   0xff             	MOVAI	0xff
0001a8   1f97     addra   0x17             	ADDRA	r0x1015
0001a9   3003     jbset   0x3, 0           	JBSET	STATUS,0
0001aa   1b98     decr    0x18             	DECR	r0x1014
                                           ;	.line	152; "MC30P6250_C.c"	__endasm;
                                           	;
0001ab   000e     clrwdt                   	clrwdt;
                                           	
0001ac   2991     goto    0x191            	GOTO	_00108_DS_
                                           _00111_DS_
                                           ;	.line	154; "MC30P6250_C.c"	}
0001ad   000c     return                   	RETURN	
                                           ; exit point of _delay_ms
                                           
                                           
                                           ;	code size estimation:
                                           ;	  399+    0 =   399 instructions (  798 byte)
                                           
                                           	end


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XX-------------- XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
02C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0300 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0340 : XXXXXXXXXXXXXXXX XXXXXXXXXXXX---- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   423

